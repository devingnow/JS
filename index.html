<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    // setTimeout(() => {
    //     console.log("안녕");
    // },3000);

    // const promise = new Promise((res, rej) => {
    //     setTimeout(() => {
    //         res("성공했어");
    //     }, 3000);
    //     setTimeout(() =>{
    //         rej("실패했어");
    //     }, 3000);
    // });

    // promise
    // .then((result) => {console.log(result)}) // 비동기 처리 이후에 반환된 값도 비동기 처리를 해야 하는 경우
    // .then((result2) => {console.log(result2)}) // 비동기 처리를 한번 더 하고 result2에 반환한다.
    // .catch((error) => {console.log(error)});

    // function callback(fn){
    //     fn();
    // }

    // // 콜백지옥
    // callback(() => {
    //     console.log("안녕1");
    //     callback(() => {
    //         console.log("안녕2");
    //         callback(() => {
    //             console.log("안녕3");
    //         })
    //     })
    // })

const num = 4;
const promise2 =new Promise((res, rej) =>{
    if(num > 5){
        res("num이 5보다 크다");
    }else {
        rej("num이 5보다 작아");
    }
},5000);

promise2.then((result) => {console.log(result)}).catch((error) => {console.log(error)})

function add(num) {
    return num + 1;
}
function addPromise(addfn, num) {
    return new Promise((res,rej) => {
    res(addfn(num));
})
}

addPromise(add, 1).then((result) => {console.log(result)}).catch((error)=> {console.log(error)})

// addPromise => {Promise 생성자 함수 콜백함수가 전달되고 (res,rej) => {우리가 작성한 함수의 내용}}
// Promise.then(콜백함수) === 메서드 반환 값은 { Promise } then의 콜백 함수가 호출되는 시기는 
// Promise 객체에서 첫번째로 전달한 매개변수에 인자값이 함수인데 이 함수가 호출되면 
// then에 전달한 콜백함수를 호출하는데 매개변수의 인자값으로 첫번째 매개변수로 전달받은 인자값의 함수가 호출될때 전달한 인자값이 전달된다.

// res는 Promise 생성할때 콜백으로 전달한 함수의 첫번째 인자 값 === 함수
// res("성공의 결과값");
// Promise 객체의 then 메서드로 전달한 콜백함수의 내용을 호출한다.
// then에 전달한 콜백 함수를 호출할때 첫번째 인자값으로 전달 해준다.
// ("성공의 결과값") => { console.log("성공의 결과값")};

const promise3 = new Promise((res,rej)=>{
    //서버에 요청을 보냈다.
    const _res = {result : "성공", data : [{ id : 1, name : 2, age : 3 },{ id : 1, name : 2, age : 3 },{ id : 1, name : 2, age : 3 }]}
    if (_res.result === "성공"){
        res(_res);
    } else {
        rej("error 데이터 요청 실패");
    }
})

// promise3. then(({ data }) => {console.log(data)});
promise3.then((res) => {console.log(res.data)}).catch((err) => {console.log(err)});
</script>
</html>